objects:
  - object: XmZoomeyeUpgradeClient
    class: upgradeclient.xm_zoomeye_upgradeclient.XmZoomeyeUpgradeClient
    scope: singleton
    properties:
      download_service: {ref: DownloadService}
      upload_service: None
      alert_service: None
      check_service: {ref: CheckService}
      constructor-args: {download_service: download_service, upload_service: upload_service, alert_service: alert_service, check_service: check_service)}

  - object: CheckService
    class: upgradeclient.service.check_service.CheckService
    scope: singleton
    properties:
      check: {ref: Check}
      cache: {ref: Cache}
      dao_factory:
        dvr: {ref: DvrDao}
        ipc: {ref: IpcDao}
        xmjp: {ref: XmjpDao}
      filter_factory:
        dvr: {ref: DvrFilter}
        ipc: {ref: IpcFilter}
        xmjp: {ref: XmjpFilter}
    constructor-args: {check: check, cache: cache, dao_factory: dao_factory, filter_factory: filter_factory}

  - object: DownloadService
    class: upgradeclient.service.download_service.DownloadService
    scope: singleton
    properties:
      cache: {ref: Cache}
      handler_factory: {ref: DownloadHandlerFactory}
      relative_path: check_cache
      check_interval: 15
    constructor-args: {cache: cache, handler_factory: handler_factory, relative_path: relative_path, check_interval: check_interval}

  - object: DownloadHandlerFactory
    class: upgradeclient.domain.bl.download_handler_factory.DownloadHandlerFactory
    scope: singleton
    properties:
      download_handlers:
        default: {ref: DefaultHandler}
        downloading_firmware: {ref: FirmwareHandler}
        downloading_releasenote: {ref: ReleaseNoteHandler}
    constructor-args: {download_handlers: download_handlers}

  - object: DefaultHandler
    class: upgradeclient.domain.bl.handlers.default.DefaultHandler
    scope: singleton
    properties:
      cache: {ref: Cache}
    constructor-args: {cache: cache}

  - object: FirmwareHandler
    class: upgradeclient.domain.bl.handlers.firmware.FirmwareHandler
    scope: singleton
    properties:
      cache: {ref: Cache}
    constructor-args: {cache: cache}

  - object: ReleaseNoteHandler
    class: upgradeclient.domain.bl.handlers.release_note.ReleaseNoteHandler
    scope: singleton
    properties:
      cache: {ref: Cache}
    constructor-args: {cache: cache}

  - object: Check
    class: upgradeclient.domain.utils.check.Check
    scope: singleton
    constructor-args: {}

  - object: Cache
    class: upgradeclient.domain.utils.cache.Cache
    scope: singleton
    properties:
      base_path: /tmp/xm_zoomeye_upgradeclient/
    constructor-args: {base_path: base_path}

  - object: DvrDao
    class: upgradeclient.domain.dao.dvr_dao.DvrDao
    scope: singleton
    properties:
      conf_path: /etc/upgradeclient/global.json
    constructor-args: {conf_path: conf_path}

  - object: IpcDao
    class: upgradeclient.domain.dao.ipc_dao.IpcDao
    scope: singleton
    properties:
      conf_path: /etc/upgradeclient/global.json
    constructor-args: {conf_path: conf_path}

  - object: XmjpDao
    class: upgradeclient.domain.dao.xmjp_dao.XmjpDao
    scope: singleton
    properties:
      conf_path: /etc/upgradeclient/global.json
    constructor-args: {conf_path: conf_path}

  - object: DvrFilter
    class: upgradeclient.domain.bl.filter.dvr_filter.DvrFilter
    scope: singleton
    constructor-args: {}

  - object: IpcFilter
    class: upgradeclient.domain.bl.filter.ipc_filter.IpcFilter
    scope: singleton
    constructor-args: {}

  - object: XmjpFilter
    class: upgradeclient.domain.bl.filter.xmjp_filter.XmjpFilter
    scope: singleton
    constructor-args: {}






